{"version":3,"sources":["useWeekCornerStyles.styles.js"],"sourcesContent":["import { useFluent_unstable } from '@fluentui/react-shared-contexts';\nimport { mergeClasses } from '@griffel/react';\nimport { DateRangeType } from '../../utils/constants';\nimport { getDateRangeArray } from '../../utils/index';\n/**\n * @internal\n */ export const weekCornersClassNames = {\n    topRightCornerDate: 'fui-CalendarDayGrid__topRightCornerDate',\n    topLeftCornerDate: 'fui-CalendarDayGrid__topLeftCornerDate',\n    bottomRightCornerDate: 'fui-CalendarDayGrid__bottomRightCornerDate',\n    bottomLeftCornerDate: 'fui-CalendarDayGrid__bottomLeftCornerDate'\n};\n/**\n * @internal\n */ export function useWeekCornerStyles(props) {\n    const { dir } = useFluent_unstable();\n    /**\n   *\n   * Section for setting the rounded corner styles on individual day cells. Individual day cells need different\n   * corners to be rounded depending on which date range type and where the cell is located in the current grid.\n   * If we just round all of the corners, there isn't a good overlap and we get gaps between contiguous day boxes\n   * in Edge browser.\n   *\n   */ const getWeekCornerStyles = (initialWeeks)=>{\n        const weekCornersStyled = {};\n        /* need to handle setting all of the corners on arbitrarily shaped blobs\n          __\n       __|A |\n      |B |C |__\n      |D |E |F |\n\n      in this case, A needs top left rounded, top right rounded\n      B needs top left rounded\n      C doesn't need any rounding\n      D needs bottom left rounded\n      E doesn't need any rounding\n      F needs top right rounding\n    */ // cut off the animation transition weeks\n        const weeks = initialWeeks.slice(1, initialWeeks.length - 1);\n        // if there's an item above, lose both top corners. Item below, lose both bottom corners, etc.\n        weeks.forEach((week, weekIndex)=>{\n            week.forEach((day, dayIndex)=>{\n                const above = weeks[weekIndex - 1] && weeks[weekIndex - 1][dayIndex] && isInSameHoverRange(weeks[weekIndex - 1][dayIndex].originalDate, day.originalDate, weeks[weekIndex - 1][dayIndex].isSelected, day.isSelected);\n                const below = weeks[weekIndex + 1] && weeks[weekIndex + 1][dayIndex] && isInSameHoverRange(weeks[weekIndex + 1][dayIndex].originalDate, day.originalDate, weeks[weekIndex + 1][dayIndex].isSelected, day.isSelected);\n                const left = weeks[weekIndex][dayIndex - 1] && isInSameHoverRange(weeks[weekIndex][dayIndex - 1].originalDate, day.originalDate, weeks[weekIndex][dayIndex - 1].isSelected, day.isSelected);\n                const right = weeks[weekIndex][dayIndex + 1] && isInSameHoverRange(weeks[weekIndex][dayIndex + 1].originalDate, day.originalDate, weeks[weekIndex][dayIndex + 1].isSelected, day.isSelected);\n                weekCornersStyled[weekIndex + '_' + dayIndex] = calculateRoundedStyles(above, below, left, right);\n            });\n        });\n        return weekCornersStyled;\n    };\n    const calculateRoundedStyles = (above, below, left, right)=>{\n        const style = [];\n        const roundedTopLeft = !above && !left;\n        const roundedTopRight = !above && !right;\n        const roundedBottomLeft = !below && !left;\n        const roundedBottomRight = !below && !right;\n        if (roundedTopLeft) {\n            style.push(dir === 'rtl' ? weekCornersClassNames.topRightCornerDate : weekCornersClassNames.topLeftCornerDate);\n        }\n        if (roundedTopRight) {\n            style.push(dir === 'rtl' ? weekCornersClassNames.topLeftCornerDate : weekCornersClassNames.topRightCornerDate);\n        }\n        if (roundedBottomLeft) {\n            style.push(dir === 'rtl' ? weekCornersClassNames.bottomRightCornerDate : weekCornersClassNames.bottomLeftCornerDate);\n        }\n        if (roundedBottomRight) {\n            style.push(dir === 'rtl' ? weekCornersClassNames.bottomLeftCornerDate : weekCornersClassNames.bottomRightCornerDate);\n        }\n        return mergeClasses(...style);\n    };\n    const isInSameHoverRange = (date1, date2, date1Selected, date2Selected)=>{\n        const { dateRangeType, firstDayOfWeek, workWeekDays } = props;\n        // The hover state looks weird with non-contiguous days in work week view. In work week, show week hover state\n        const dateRangeHoverType = dateRangeType === DateRangeType.WorkWeek ? DateRangeType.Week : dateRangeType;\n        // we do not pass daysToSelectInDayView because we handle setting those styles dyanamically in onMouseOver\n        const dateRange = getDateRangeArray(date1, dateRangeHoverType, firstDayOfWeek, workWeekDays);\n        if (date1Selected !== date2Selected) {\n            // if one is selected and the other is not, they can't be in the same range\n            return false;\n        } else if (date1Selected && date2Selected) {\n            // if they're both selected at the same time they must be in the same range\n            return true;\n        }\n        // otherwise, both must be unselected, so check the dateRange\n        return dateRange.filter((date)=>date.getTime() === date2.getTime()).length > 0;\n    };\n    return [\n        getWeekCornerStyles,\n        calculateRoundedStyles\n    ];\n}\n"],"names":["useWeekCornerStyles","weekCornersClassNames","topRightCornerDate","topLeftCornerDate","bottomRightCornerDate","bottomLeftCornerDate","props","dir","useFluent_unstable","getWeekCornerStyles","initialWeeks","weekCornersStyled","weeks","slice","length","forEach","week","weekIndex","day","dayIndex","above","isInSameHoverRange","originalDate","isSelected","below","left","right","calculateRoundedStyles","style","roundedTopLeft","roundedTopRight","roundedBottomLeft","roundedBottomRight","push","mergeClasses","date1","date2","date1Selected","date2Selected","dateRangeType","firstDayOfWeek","workWeekDays","dateRangeHoverType","DateRangeType","WorkWeek","Week","dateRange","getDateRangeArray","filter","date","getTime"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"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"}