{"version":3,"sources":["Calendar.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Backspace, Enter, Escape, PageDown, PageUp, Space } from '@fluentui/keyboard-keys';\nimport { useControllableState } from '@fluentui/react-utilities';\nimport { useFluent_unstable as useFluent } from '@fluentui/react-shared-contexts';\nimport {\n  addMonths,\n  addYears,\n  DateRangeType,\n  DayOfWeek,\n  DEFAULT_CALENDAR_STRINGS,\n  DEFAULT_DATE_FORMATTING,\n  FirstWeekOfYear,\n  focusAsync,\n} from '../../utils';\nimport { CalendarDay } from '../CalendarDay/CalendarDay';\nimport { CalendarMonth } from '../CalendarMonth/CalendarMonth';\nimport { defaultNavigationIcons } from './calendarNavigationIcons';\nimport { useCalendarStyles_unstable } from './useCalendarStyles.styles';\nimport type { ICalendarDay } from '../CalendarDay/CalendarDay.types';\nimport type { ICalendarMonth } from '../CalendarMonth/CalendarMonth.types';\nimport type { CalendarProps } from './Calendar.types';\n\nconst MIN_SIZE_FORCE_OVERLAY = 440;\n\nconst defaultWorkWeekDays: DayOfWeek[] = [\n  DayOfWeek.Monday,\n  DayOfWeek.Tuesday,\n  DayOfWeek.Wednesday,\n  DayOfWeek.Thursday,\n  DayOfWeek.Friday,\n];\n\nfunction useDateState(props: CalendarProps) {\n  const { value, today: todayProp, onSelectDate } = props;\n\n  const today = React.useMemo(() => todayProp ?? new Date(), [todayProp]);\n\n  /** The currently selected date in the calendar */\n  const [selectedDate, setSelectedDate] = useControllableState({\n    state: value,\n    defaultState: value ? undefined : today,\n    initialState: today,\n  });\n\n  /** The currently focused date in the day picker, but not necessarily selected */\n  const [navigatedDay = today, setNavigatedDay] = React.useState(value);\n\n  /** The currently focused date in the month picker, but not necessarily selected */\n  const [navigatedMonth = today, setNavigatedMonth] = React.useState(value);\n\n  /** If using a controlled value, when that value changes, navigate to that date */\n  const [lastSelectedDate = today, setLastSelectedDate] = React.useState(value);\n  if (value && lastSelectedDate.valueOf() !== value.valueOf()) {\n    setNavigatedDay(value);\n    setNavigatedMonth(value);\n    setLastSelectedDate(value);\n  }\n\n  const navigateMonth = (date: Date) => {\n    setNavigatedMonth(date);\n  };\n\n  const navigateDay = (date: Date) => {\n    setNavigatedMonth(date);\n    setNavigatedDay(date);\n  };\n\n  const onDateSelected = (date: Date, selectedDateRangeArray?: Date[]) => {\n    setNavigatedMonth(date);\n    setNavigatedDay(date);\n    setSelectedDate(date);\n    onSelectDate?.(date, selectedDateRangeArray);\n  };\n\n  return [selectedDate, navigatedDay, navigatedMonth, onDateSelected, navigateDay, navigateMonth] as const;\n}\n\nfunction useVisibilityState({\n  isDayPickerVisible: isDayPickerVisibleProp,\n  isMonthPickerVisible: isMonthPickerVisibleProp,\n  showMonthPickerAsOverlay,\n}: CalendarProps) {\n  /** State used to show/hide month picker */\n  const showMonthPickerAsOverlayState = useShowMonthPickerAsOverlay({\n    isDayPickerVisible: isDayPickerVisibleProp,\n    showMonthPickerAsOverlay,\n  });\n\n  const [isMonthPickerVisible, setIsMonthPickerVisible] = React.useState(() =>\n    showMonthPickerAsOverlayState ? false : isMonthPickerVisibleProp ?? false,\n  );\n  /** State used to show/hide day picker */\n  const [isDayPickerVisible, setIsDayPickerVisible] = React.useState(() =>\n    showMonthPickerAsOverlayState ? true : isDayPickerVisibleProp ?? true,\n  );\n\n  const toggleDayMonthPickerVisibility = () => {\n    setIsMonthPickerVisible(!isMonthPickerVisible);\n    setIsDayPickerVisible(!isDayPickerVisible);\n  };\n\n  return [isMonthPickerVisible, isDayPickerVisible, toggleDayMonthPickerVisibility] as const;\n}\n\nfunction useFocusLogic({ componentRef }: CalendarProps, isDayPickerVisible: boolean, isMonthPickerVisible: boolean) {\n  const dayPicker = React.useRef<ICalendarDay>(null);\n  const monthPicker = React.useRef<ICalendarMonth>(null);\n  const focusOnUpdate = React.useRef(false);\n  const { targetDocument } = useFluent();\n  const win = targetDocument?.defaultView;\n\n  const focus = React.useCallback(() => {\n    if (isDayPickerVisible && dayPicker.current) {\n      focusAsync(dayPicker.current, win);\n    } else if (isMonthPickerVisible && monthPicker.current) {\n      focusAsync(monthPicker.current, win);\n    }\n  }, [isDayPickerVisible, isMonthPickerVisible, win]);\n\n  React.useImperativeHandle(componentRef, () => ({ focus }), [focus]);\n\n  React.useEffect(() => {\n    if (focusOnUpdate.current) {\n      focus();\n      focusOnUpdate.current = false;\n    }\n  });\n\n  const focusOnNextUpdate = () => {\n    focusOnUpdate.current = true;\n  };\n\n  return [dayPicker, monthPicker, focusOnNextUpdate] as const;\n}\n\n/**\n * @internal\n */\nexport const Calendar: React.FunctionComponent<CalendarProps> = React.forwardRef<HTMLDivElement, CalendarProps>(\n  (props, forwardedRef) => {\n    const {\n      allFocusable = false,\n      calendarDayProps,\n      calendarMonthProps,\n      className,\n      componentRef,\n      dateRangeType = DateRangeType.Day,\n      dateTimeFormatter = DEFAULT_DATE_FORMATTING,\n      firstDayOfWeek = DayOfWeek.Sunday,\n      firstWeekOfYear = FirstWeekOfYear.FirstDay,\n      highlightCurrentMonth = false,\n      highlightSelectedMonth = false,\n      id,\n      isDayPickerVisible: isDayPickerVisibleProp = true,\n      isMonthPickerVisible: isMonthPickerVisibleProp = true,\n      maxDate,\n      minDate,\n      onDismiss,\n      onSelectDate,\n      restrictedDates,\n      showCloseButton = false,\n      showGoToToday = true,\n      showMonthPickerAsOverlay: showMonthPickerAsOverlayProp = false,\n      showSixWeeksByDefault = false,\n      showWeekNumbers = false,\n      strings = DEFAULT_CALENDAR_STRINGS,\n      today: todayProp,\n      value,\n      workWeekDays = defaultWorkWeekDays,\n    } = props;\n\n    const today = React.useMemo(() => {\n      return todayProp ?? new Date();\n    }, [todayProp]);\n\n    const [selectedDate, navigatedDay, navigatedMonth, onDateSelected, navigateDay, navigateMonth] = useDateState({\n      onSelectDate,\n      value,\n      today,\n    });\n    const [isMonthPickerVisible, isDayPickerVisible, toggleDayMonthPickerVisibility] = useVisibilityState({\n      isDayPickerVisible: isDayPickerVisibleProp,\n      isMonthPickerVisible: isMonthPickerVisibleProp,\n      showMonthPickerAsOverlay: showMonthPickerAsOverlayProp,\n    });\n    const [dayPicker, monthPicker, focusOnNextUpdate] = useFocusLogic(\n      { componentRef },\n      isDayPickerVisible,\n      isMonthPickerVisible,\n    );\n\n    const renderGoToTodayButton = () => {\n      let goTodayEnabled = showGoToToday;\n\n      if (goTodayEnabled && today) {\n        goTodayEnabled =\n          navigatedDay.getFullYear() !== today.getFullYear() ||\n          navigatedDay.getMonth() !== today.getMonth() ||\n          navigatedMonth.getFullYear() !== today.getFullYear() ||\n          navigatedMonth.getMonth() !== today.getMonth();\n      }\n\n      return (\n        showGoToToday && (\n          <button\n            className={classes.goTodayButton}\n            onClick={onGotoToday}\n            onKeyDown={onButtonKeyDown(onGotoToday)}\n            type=\"button\"\n            disabled={!goTodayEnabled}\n          >\n            {strings!.goToToday}\n          </button>\n        )\n      );\n    };\n\n    const onNavigateDayDate = (date: Date, focusOnNavigatedDay: boolean): void => {\n      navigateDay(date);\n      if (focusOnNavigatedDay) {\n        focusOnNextUpdate();\n      }\n    };\n\n    const onNavigateMonthDate = (date: Date, focusOnNavigatedDay: boolean): void => {\n      if (focusOnNavigatedDay) {\n        focusOnNextUpdate();\n      }\n\n      if (!focusOnNavigatedDay) {\n        navigateMonth(date);\n        return;\n      }\n\n      if (monthPickerOnly) {\n        onDateSelected(date);\n      }\n\n      navigateDay(date);\n    };\n\n    const showMonthPickerAsOverlay = useShowMonthPickerAsOverlay({\n      isDayPickerVisible: isDayPickerVisibleProp,\n      showMonthPickerAsOverlay: showMonthPickerAsOverlayProp,\n    });\n\n    const onHeaderSelect = showMonthPickerAsOverlay\n      ? (): void => {\n          toggleDayMonthPickerVisibility();\n\n          focusOnNextUpdate();\n        }\n      : undefined;\n\n    const onGotoToday = (): void => {\n      navigateDay(today!);\n      if (showMonthPickerAsOverlay && isMonthPickerVisible) {\n        toggleDayMonthPickerVisibility();\n      }\n      focusOnNextUpdate();\n    };\n\n    const onButtonKeyDown = (callback: () => void): ((ev: React.KeyboardEvent<HTMLButtonElement>) => void) => {\n      return (ev: React.KeyboardEvent<HTMLButtonElement>) => {\n        switch (ev.key) {\n          case Enter:\n          case Space:\n            callback();\n            break;\n        }\n      };\n    };\n\n    const onDatePickerPopupKeyDown = (ev: React.KeyboardEvent<HTMLElement>): void => {\n      switch (ev.key) {\n        case Enter:\n          ev.preventDefault();\n          break;\n\n        case Backspace:\n          ev.preventDefault();\n          break;\n\n        case Escape:\n          ev.stopPropagation();\n          onDismiss?.();\n          break;\n\n        case PageUp:\n          if (ev.ctrlKey) {\n            // go to next year\n            navigateDay(addYears(navigatedDay, 1));\n          } else {\n            // go to next month\n            navigateDay(addMonths(navigatedDay, 1));\n          }\n          ev.preventDefault();\n          break;\n        case PageDown:\n          if (ev.ctrlKey) {\n            // go to previous year\n            navigateDay(addYears(navigatedDay, -1));\n          } else {\n            // go to previous month\n            navigateDay(addMonths(navigatedDay, -1));\n          }\n          ev.preventDefault();\n          break;\n        default:\n          break;\n      }\n    };\n\n    const monthPickerOnly = !showMonthPickerAsOverlay && !isDayPickerVisible;\n\n    const classes = useCalendarStyles_unstable({\n      className,\n      isDayPickerVisible,\n      isMonthPickerVisible,\n      showWeekNumbers,\n    });\n\n    let todayDateString: string = '';\n    let selectedDateString: string = '';\n    if (dateTimeFormatter && strings!.todayDateFormatString) {\n      todayDateString = strings!.todayDateFormatString.replace(\n        '{0}',\n        dateTimeFormatter.formatMonthDayYear(today, strings!),\n      );\n    }\n    if (dateTimeFormatter && strings!.selectedDateFormatString) {\n      const dateStringFormatter = monthPickerOnly\n        ? dateTimeFormatter.formatMonthYear\n        : dateTimeFormatter.formatMonthDayYear;\n      selectedDateString = strings!.selectedDateFormatString.replace(\n        '{0}',\n        dateStringFormatter(selectedDate, strings!),\n      );\n    }\n    const selectionAndTodayString = selectedDateString + ', ' + todayDateString;\n\n    return (\n      <div id={id} ref={forwardedRef} className={classes.root} onKeyDown={onDatePickerPopupKeyDown}>\n        <div className={classes.liveRegion} aria-live=\"polite\" aria-atomic=\"true\">\n          <span>{selectedDateString}</span>\n        </div>\n        {isDayPickerVisible && (\n          <CalendarDay\n            gridLabel={selectionAndTodayString}\n            selectedDate={selectedDate!}\n            navigatedDate={navigatedDay!}\n            today={today}\n            onSelectDate={onDateSelected}\n            // eslint-disable-next-line react/jsx-no-bind\n            onNavigateDate={onNavigateDayDate}\n            onDismiss={onDismiss}\n            firstDayOfWeek={firstDayOfWeek!}\n            dateRangeType={dateRangeType!}\n            strings={strings!}\n            // eslint-disable-next-line react/jsx-no-bind\n            onHeaderSelect={onHeaderSelect}\n            showWeekNumbers={showWeekNumbers}\n            firstWeekOfYear={firstWeekOfYear!}\n            dateTimeFormatter={dateTimeFormatter!}\n            showSixWeeksByDefault={showSixWeeksByDefault}\n            minDate={minDate}\n            maxDate={maxDate}\n            navigationIcons={defaultNavigationIcons}\n            restrictedDates={restrictedDates}\n            workWeekDays={workWeekDays}\n            componentRef={dayPicker}\n            showCloseButton={showCloseButton}\n            allFocusable={allFocusable}\n            {...calendarDayProps} // at end of list so consumer's custom functions take precedence\n          />\n        )}\n        {isDayPickerVisible && isMonthPickerVisible && <div className={classes.divider} />}\n        {isMonthPickerVisible ? (\n          <div className={classes.monthPickerWrapper}>\n            <CalendarMonth\n              navigatedDate={navigatedMonth}\n              selectedDate={navigatedDay}\n              strings={strings!}\n              // eslint-disable-next-line react/jsx-no-bind\n              onNavigateDate={onNavigateMonthDate}\n              today={today}\n              highlightCurrentMonth={highlightCurrentMonth!}\n              highlightSelectedMonth={highlightSelectedMonth!}\n              // eslint-disable-next-line react/jsx-no-bind\n              onHeaderSelect={onHeaderSelect}\n              dateTimeFormatter={dateTimeFormatter!}\n              minDate={minDate}\n              maxDate={maxDate}\n              componentRef={monthPicker}\n              navigationIcons={defaultNavigationIcons}\n              {...calendarMonthProps} // at end of list so consumer's custom functions take precedence\n            />\n            {renderGoToTodayButton()}\n          </div>\n        ) : (\n          renderGoToTodayButton()\n        )}\n      </div>\n    );\n  },\n);\nCalendar.displayName = 'Calendar';\n\nconst useShowMonthPickerAsOverlay = ({ isDayPickerVisible, showMonthPickerAsOverlay }: CalendarProps) => {\n  const { targetDocument } = useFluent();\n  const win = targetDocument?.defaultView;\n  return showMonthPickerAsOverlay || (isDayPickerVisible && win && win.innerWidth <= MIN_SIZE_FORCE_OVERLAY);\n};\n"],"names":["Calendar","MIN_SIZE_FORCE_OVERLAY","defaultWorkWeekDays","DayOfWeek","Monday","Tuesday","Wednesday","Thursday","Friday","useDateState","props","value","today","todayProp","onSelectDate","React","useMemo","Date","selectedDate","setSelectedDate","useControllableState","state","defaultState","undefined","initialState","navigatedDay","setNavigatedDay","useState","navigatedMonth","setNavigatedMonth","lastSelectedDate","setLastSelectedDate","valueOf","navigateMonth","date","navigateDay","onDateSelected","selectedDateRangeArray","useVisibilityState","isDayPickerVisible","isDayPickerVisibleProp","isMonthPickerVisible","isMonthPickerVisibleProp","showMonthPickerAsOverlay","showMonthPickerAsOverlayState","useShowMonthPickerAsOverlay","setIsMonthPickerVisible","setIsDayPickerVisible","toggleDayMonthPickerVisibility","useFocusLogic","componentRef","dayPicker","useRef","monthPicker","focusOnUpdate","targetDocument","useFluent","win","defaultView","focus","useCallback","current","focusAsync","useImperativeHandle","useEffect","focusOnNextUpdate","forwardRef","forwardedRef","allFocusable","calendarDayProps","calendarMonthProps","className","dateRangeType","DateRangeType","Day","dateTimeFormatter","DEFAULT_DATE_FORMATTING","firstDayOfWeek","Sunday","firstWeekOfYear","FirstWeekOfYear","FirstDay","highlightCurrentMonth","highlightSelectedMonth","id","maxDate","minDate","onDismiss","restrictedDates","showCloseButton","showGoToToday","showMonthPickerAsOverlayProp","showSixWeeksByDefault","showWeekNumbers","strings","DEFAULT_CALENDAR_STRINGS","workWeekDays","renderGoToTodayButton","goTodayEnabled","getFullYear","getMonth","createElement","button","classes","goTodayButton","onClick","onGotoToday","onKeyDown","onButtonKeyDown","type","disabled","goToToday","onNavigateDayDate","focusOnNavigatedDay","onNavigateMonthDate","monthPickerOnly","onHeaderSelect","callback","ev","key","Enter","Space","onDatePickerPopupKeyDown","preventDefault","Backspace","Escape","stopPropagation","PageUp","ctrlKey","addYears","addMonths","PageDown","useCalendarStyles_unstable","todayDateString","selectedDateString","todayDateFormatString","replace","formatMonthDayYear","selectedDateFormatString","dateStringFormatter","formatMonthYear","selectionAndTodayString","div","ref","root","liveRegion","aria-live","aria-atomic","span","CalendarDay","gridLabel","navigatedDate","onNavigateDate","navigationIcons","defaultNavigationIcons","divider","monthPickerWrapper","CalendarMonth","displayName","innerWidth"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"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"}