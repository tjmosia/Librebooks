{"version":3,"names":["useFluent_unstable","mergeClasses","DateRangeType","getDateRangeArray","weekCornersClassNames","topRightCornerDate","topLeftCornerDate","bottomRightCornerDate","bottomLeftCornerDate","useWeekCornerStyles","props","dir","getWeekCornerStyles","initialWeeks","weekCornersStyled","weeks","slice","length","forEach","week","weekIndex","day","dayIndex","above","isInSameHoverRange","originalDate","isSelected","below","left","right","calculateRoundedStyles","style","roundedTopLeft","roundedTopRight","roundedBottomLeft","roundedBottomRight","push","date1","date2","date1Selected","date2Selected","dateRangeType","firstDayOfWeek","workWeekDays","dateRangeHoverType","WorkWeek","Week","dateRange","filter","date","getTime"],"sources":["useWeekCornerStyles.styles.js"],"sourcesContent":["import { useFluent_unstable } from '@fluentui/react-shared-contexts';\nimport { mergeClasses } from '@griffel/react';\nimport { DateRangeType } from '../../utils/constants';\nimport { getDateRangeArray } from '../../utils/index';\n/**\n * @internal\n */ export const weekCornersClassNames = {\n    topRightCornerDate: 'fui-CalendarDayGrid__topRightCornerDate',\n    topLeftCornerDate: 'fui-CalendarDayGrid__topLeftCornerDate',\n    bottomRightCornerDate: 'fui-CalendarDayGrid__bottomRightCornerDate',\n    bottomLeftCornerDate: 'fui-CalendarDayGrid__bottomLeftCornerDate'\n};\n/**\n * @internal\n */ export function useWeekCornerStyles(props) {\n    const { dir } = useFluent_unstable();\n    /**\n   *\n   * Section for setting the rounded corner styles on individual day cells. Individual day cells need different\n   * corners to be rounded depending on which date range type and where the cell is located in the current grid.\n   * If we just round all of the corners, there isn't a good overlap and we get gaps between contiguous day boxes\n   * in Edge browser.\n   *\n   */ const getWeekCornerStyles = (initialWeeks)=>{\n        const weekCornersStyled = {};\n        /* need to handle setting all of the corners on arbitrarily shaped blobs\n          __\n       __|A |\n      |B |C |__\n      |D |E |F |\n\n      in this case, A needs top left rounded, top right rounded\n      B needs top left rounded\n      C doesn't need any rounding\n      D needs bottom left rounded\n      E doesn't need any rounding\n      F needs top right rounding\n    */ // cut off the animation transition weeks\n        const weeks = initialWeeks.slice(1, initialWeeks.length - 1);\n        // if there's an item above, lose both top corners. Item below, lose both bottom corners, etc.\n        weeks.forEach((week, weekIndex)=>{\n            week.forEach((day, dayIndex)=>{\n                const above = weeks[weekIndex - 1] && weeks[weekIndex - 1][dayIndex] && isInSameHoverRange(weeks[weekIndex - 1][dayIndex].originalDate, day.originalDate, weeks[weekIndex - 1][dayIndex].isSelected, day.isSelected);\n                const below = weeks[weekIndex + 1] && weeks[weekIndex + 1][dayIndex] && isInSameHoverRange(weeks[weekIndex + 1][dayIndex].originalDate, day.originalDate, weeks[weekIndex + 1][dayIndex].isSelected, day.isSelected);\n                const left = weeks[weekIndex][dayIndex - 1] && isInSameHoverRange(weeks[weekIndex][dayIndex - 1].originalDate, day.originalDate, weeks[weekIndex][dayIndex - 1].isSelected, day.isSelected);\n                const right = weeks[weekIndex][dayIndex + 1] && isInSameHoverRange(weeks[weekIndex][dayIndex + 1].originalDate, day.originalDate, weeks[weekIndex][dayIndex + 1].isSelected, day.isSelected);\n                weekCornersStyled[weekIndex + '_' + dayIndex] = calculateRoundedStyles(above, below, left, right);\n            });\n        });\n        return weekCornersStyled;\n    };\n    const calculateRoundedStyles = (above, below, left, right)=>{\n        const style = [];\n        const roundedTopLeft = !above && !left;\n        const roundedTopRight = !above && !right;\n        const roundedBottomLeft = !below && !left;\n        const roundedBottomRight = !below && !right;\n        if (roundedTopLeft) {\n            style.push(dir === 'rtl' ? weekCornersClassNames.topRightCornerDate : weekCornersClassNames.topLeftCornerDate);\n        }\n        if (roundedTopRight) {\n            style.push(dir === 'rtl' ? weekCornersClassNames.topLeftCornerDate : weekCornersClassNames.topRightCornerDate);\n        }\n        if (roundedBottomLeft) {\n            style.push(dir === 'rtl' ? weekCornersClassNames.bottomRightCornerDate : weekCornersClassNames.bottomLeftCornerDate);\n        }\n        if (roundedBottomRight) {\n            style.push(dir === 'rtl' ? weekCornersClassNames.bottomLeftCornerDate : weekCornersClassNames.bottomRightCornerDate);\n        }\n        return mergeClasses(...style);\n    };\n    const isInSameHoverRange = (date1, date2, date1Selected, date2Selected)=>{\n        const { dateRangeType, firstDayOfWeek, workWeekDays } = props;\n        // The hover state looks weird with non-contiguous days in work week view. In work week, show week hover state\n        const dateRangeHoverType = dateRangeType === DateRangeType.WorkWeek ? DateRangeType.Week : dateRangeType;\n        // we do not pass daysToSelectInDayView because we handle setting those styles dyanamically in onMouseOver\n        const dateRange = getDateRangeArray(date1, dateRangeHoverType, firstDayOfWeek, workWeekDays);\n        if (date1Selected !== date2Selected) {\n            // if one is selected and the other is not, they can't be in the same range\n            return false;\n        } else if (date1Selected && date2Selected) {\n            // if they're both selected at the same time they must be in the same range\n            return true;\n        }\n        // otherwise, both must be unselected, so check the dateRange\n        return dateRange.filter((date)=>date.getTime() === date2.getTime()).length > 0;\n    };\n    return [\n        getWeekCornerStyles,\n        calculateRoundedStyles\n    ];\n}\n"],"mappings":"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","ignoreList":[]}